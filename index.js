import"./assets/styles-BtAFSzR9.js";import{g as T,a as B,b as $,c as x}from"./assets/main-BEicqN6b.js";const f=document.getElementById("scrollTopButton");window.onscroll=function(){document.body.scrollTop>300||document.documentElement.scrollTop>300?f.classList.add("active"):f.classList.remove("active")};f.onclick=function(){window.scrollTo({top:0,behavior:"smooth"})};const q=T(),v=B(q);function G(e){return`
    <li id="${e.id}" class="listener" onclick="openModal('${e.id}')">
        <div class="game-category-card">
            <div class="overlay-div">
                <img class="gameByCategory-img" src="${e.image}" alt="${e.title}">
                <p class="overlay-txt">quick view</p>
            </div>
            <div class="game-category-details">
                <h3 class="game-category-title">${e.title}</h3>
                <p class="game-category-author">${e.author}</p>
            </div>
        </div>
    </li>
    `}function A(e,t){const o=document.querySelector(`.game-category[data-category="${e}"]`);if(o){const n=o.querySelector(".mask"),i=t.map(a=>G(a)).join(""),s=o.querySelector(".games-category-list");s.innerHTML=i,n.style.display="none"}}function O(){Object.keys(v).forEach(e=>{const t=v[e];A(e,t)})}function U(e){const t=document.createElement("div");t.className="game-category",t.setAttribute("data-category",e);const o=document.createElement("div");o.className="category-title";const n=document.createElement("div");n.className="mask",n.innerHTML='<div class="loader"></div>';const i=document.createElement("span");i.textContent=e.toUpperCase(),o.appendChild(i);const s=document.createElement("div");s.className="games";const a=document.createElement("ul");a.className="games-category-list",s.appendChild(a);const c=document.createElement("button");return c.id=e.replace(/\s+/g,"_"),c.classList.add("see-more"),c.textContent="SEE MORE",c.addEventListener("click",D),t.appendChild(o),t.appendChild(n),t.appendChild(s),t.appendChild(c),t}function D(e){const o=e.target.id.replace(/_/g," ");document.querySelectorAll(".category-item").forEach(c=>{c.classList.remove("active-category"),c.textContent.trim()===o.trim()&&c.classList.add("active-category")}),document.querySelectorAll(".glow-effect").forEach(c=>c.remove());const s=v[o];A(o,s),new GlowEffectsManager().updateEffects()}function N(){const e=document.querySelector(".top-games-list");q.forEach(t=>{const o=U(t);e.appendChild(o)})}document.addEventListener("DOMContentLoaded",()=>{N(),O()});document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelectorAll(".category-item"),t=document.querySelector(".topGamesTitle"),o=Array.from(e).find(a=>a.textContent.trim()==="All Categories"),n=document.querySelector(".top-games-list");function i(){t.textContent.trim()==="Most Popular Games"&&(e.forEach(a=>a.classList.remove("active-category")),o.classList.add("active-category"),n.classList.remove("category-active"))}function s(){t.innerHTML="Most Popular Games",n.classList.remove("category-active"),i()}o.addEventListener("click",s),e.forEach(a=>{a.addEventListener("click",()=>{const c=a.textContent.trim().toUpperCase();if(c==="ALL CATEGORIES")s();else if(t.innerHTML=`${c} Games`,e.forEach(r=>r.classList.remove("active-category")),a.classList.add("active-category"),document.querySelectorAll(".game-category").forEach(r=>{r.style.display=r.getAttribute("data-category").toUpperCase()===c?"block":"none"}),n.classList.add("category-active"),window.innerWidth<=768){const r=document.getElementsByTagName("aside")[0];r.style.display="none"}})}),document.querySelectorAll(".see-more").forEach(a=>{a.addEventListener("click",()=>{const c=a.id.replace("see-more-","").replace("_"," "),r=$(c);t.innerHTML=`${c} Games`,document.querySelectorAll(".game-category").forEach(p=>{p.style.display="none"}),n.innerHTML="",r.forEach(p=>{const I=j(p);n.appendChild(I)}),n.classList.add("category-active")})}),i()});function j(e){const t=document.createElement("li");return t.id=e.id,t.className="listener",t.setAttribute("onclick",`openModal('${e.id}')`),t.innerHTML=`
        <div class="game-category-card">
            <div class="overlay-div">
                <img class="gameByCategory-img" src="${e.image}" alt="${e.title}">
                <p class="overlay-txt">quick view</p>
            </div>
            <div class="game-category-details">
                <h3 class="game-category-title">${e.title}</h3>
                <p class="game-category-author">${e.author}</p>
            </div>
        </div>
    `,t}window.openModal=F;const l=document.querySelector(".modal"),w=l.querySelector(".modal-body"),H=l.querySelector(".modal-close"),d=l.querySelector(".add-to-list"),W=l.querySelector(".under-btn-text");async function F(e){try{const t=await x(e);if(l.setAttribute("data-game",JSON.stringify(t)),R(t),l.classList.add("open"),document.body.style.overflow="hidden",!!localStorage.getItem("activeUser")){const n=await J(t);M(n),d.style.display="inline-block"}else d.style.display="none"}catch(t){console.log("Error loading game details",t)}}function R(e){const t=document.querySelector(".game-cover"),o=document.querySelector(".game-title"),n=document.querySelector(".game-author"),i=document.querySelector(".game-description"),s=document.querySelector(".marketplace-logo.steam"),a=document.querySelector(".marketplace-logo.trailer");t.src=e.image,t.alt=e.title,o.textContent=e.title,n.textContent=`by ${e.author}`,i.textContent=e.description||"No description available",s.href=e.links.steam||"#",a.href=e.links.trailer||"#"}async function J(e){const t=localStorage.getItem("activeUser");if(!t)return alert("Ви повинні увійти до системи, щоб додавати ігри до корзини."),window.location.href="auth.html",!1;const i=(await(await fetch("../database/users.json")).json()).find(s=>s.id===parseInt(t));return i?i.cart.includes(e.id):!1}function M(e){const t=e?"Remove from shopping list":"Add to shopping list";d.textContent=t,W.textContent=e?"Removed from shopping list":"Added to shopping list",d.classList.add("show-text"),setTimeout(()=>{d.classList.remove("show-text")},4e3)}async function P(e){e.stopPropagation();const t=localStorage.getItem("activeUser");if(!t){alert("Ви повинні увійти до системи, щоб додавати ігри до корзини."),window.location.href="auth.html";return}const n=await(await fetch("../database/users.json")).json(),i=n.findIndex(r=>r.id===parseInt(t));if(i===-1){alert("Помилка: Користувач не знайдений.");return}const s=n[i],a=JSON.parse(l.getAttribute("data-game")),c=s.cart.includes(a.id);c?s.cart=s.cart.filter(r=>r!==a.id):s.cart.push(a.id),await _(n),M(!c)}async function _(e){await fetch("../database/users.json",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}d.addEventListener("click",P);function L(){l.classList.remove("open"),document.body.style.overflow=""}H.addEventListener("click",L);w.addEventListener("click",function(e){e.target===w&&L()});document.addEventListener("keydown",function(e){e.key==="Escape"&&L()});window.openAboutWindow=K;const u=document.querySelectorAll(".modal")[1],k=u.querySelector(".modal-body"),z=u.querySelector(".modal-close");function K(){u.classList.add("open"),document.body.style.overflow="hidden"}function h(){u.classList.remove("open"),document.body.style.overflow=""}z.addEventListener("click",h);k.addEventListener("click",function(e){e.target===k&&h()});document.addEventListener("keydown",function(e){e.key==="Escape"&&h()});window.openFeedbackWindow=V;const m=document.querySelectorAll(".modal")[2],S=m.querySelector(".modal-body"),Q=m.querySelector(".modal-close");function V(){m.classList.add("open"),document.body.style.overflow="hidden"}function g(){m.classList.remove("open"),document.body.style.overflow=""}Q.addEventListener("click",g);S.addEventListener("click",function(e){e.target===S&&g()});document.addEventListener("keydown",function(e){e.key==="Escape"&&g()});const X=document.getElementById("feedback-form");X.addEventListener("submit",function(e){e.preventDefault(),alert("Thank you for your feedback!"),g()});window.openReviewsWindow=Z;const y=document.querySelectorAll(".modal")[3],b=y.querySelector(".modal-body"),Y=y.querySelector(".modal-close");function Z(){y.classList.add("open"),document.body.style.overflow="hidden"}function E(){y.classList.remove("open"),document.body.style.overflow=""}Y.addEventListener("click",E);b.addEventListener("click",function(e){e.target===b&&E()});document.addEventListener("keydown",function(e){e.key==="Escape"&&E()});function ee(){const e=document.getElementById("authLink"),t=document.getElementById("authImage");!!localStorage.getItem("activeUser")?(e.textContent="LOGOUT",e.href="#",t.querySelector("img").src="./img/logout.svg",e.addEventListener("click",C)):(e.textContent="LOGIN",e.href="../auth.html",t.querySelector("img").src="./img/login.svg",e.removeEventListener("click",C))}function C(e){e.preventDefault(),localStorage.removeItem("activeUser"),alert("Ви успішно вийшли з системи."),window.location.reload()}document.addEventListener("DOMContentLoaded",ee);
//# sourceMappingURL=index.js.map
