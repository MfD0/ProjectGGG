import"./assets/styles-Czy6Rkti.js";import{a as H,b as B,c as z,g as J}from"./assets/updateLogin-1qROxN_8.js";let U=class{constructor(t={}){this.options={glowSize:t.glowSize||200,minDistance:t.minDistance||300,effectsPerSection:t.effectsPerSection||3,sectionHeight:t.sectionHeight||1e3,containerSelector:t.containerSelector||"body"},this.container=document.querySelector(this.options.containerSelector),this.effects=[],this.createStyles(),this.init(),window.addEventListener("resize",this.handleResize.bind(this))}createStyles(){const t=document.createElement("style");t.textContent=`
      .glow-effect {
        position: absolute;
        width: ${this.options.glowSize}px;
        height: ${this.options.glowSize}px;
        background: radial-gradient(circle, rgba(255, 255, 255, 0.3), transparent);
        filter: blur(100px);
        opacity: 0.6;
        pointer-events: none;
        transition: transform 0.5s ease;
        animation: glowAnimation 7s infinite alternate;
      }

      @keyframes glowAnimation {
        0% {
          transform: translate(0, 0);
        }
        100% {
          transform: translate(50px, 50px);
        }
      }
    `,document.head.appendChild(t)}generateRandomPosition(t,o,n){let i=0;const c=50;for(;i<c;){const s=Math.random()*(t-this.options.glowSize),a=Math.random()*(o-this.options.glowSize);if(n.every(l=>Math.sqrt(Math.pow(s-l.x,2)+Math.pow(a-l.y,2))>=this.options.minDistance)||i===c-1)return{x:s,y:a};i++}}createGlowEffect(t,o){const n=document.createElement("div");return n.className="glow-effect",n.style.left=`${t}px`,n.style.top=`${o}px`,n}init(){this.updateEffects()}updateEffects(){this.effects.forEach(s=>s.remove()),this.effects=[];const t=Math.max(this.container.scrollHeight,this.container.clientHeight),o=this.container.clientWidth,i=Math.ceil(t/this.options.sectionHeight)*this.options.effectsPerSection,c=[];for(let s=0;s<i;s++){const a=this.generateRandomPosition(o,t,c);c.push(a);const r=this.createGlowEffect(a.x,a.y);this.container.appendChild(r),this.effects.push(r)}}handleResize(){clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(()=>{this.updateEffects()},150)}};console.log("main.js start");const L=new U({glowSize:200,minDistance:300,effectsPerSection:3,sectionHeight:1e3,containerSelector:"body"}),$=H(),S=document.querySelector(".categories-list"),R=document.querySelector(".topGamesTitle"),v=document.querySelector(".top-games-list"),g=document.createElement("li");g.classList.add("category-item");g.textContent="All Categories";S.appendChild(g);g.addEventListener("click",W);if($.length>0)$.forEach(e=>{const t=document.createElement("li");t.classList.add("category-item"),t.textContent=e,S.appendChild(t),t.addEventListener("click",()=>{P(e)})});else{const e=document.createElement("li");e.textContent="No categories available",S.appendChild(e)}function P(e){const t=B(e);R.innerHTML=`${e} Games`,document.querySelectorAll(".game-category").forEach(o=>{o.style.display="none"}),v.innerHTML="",t.forEach(o=>{const n=F(o);v.appendChild(n)}),v.classList.add("category-active"),setTimeout(()=>{L.updateEffects()},100)}function W(){location.reload()}function F(e){const t=document.createElement("li");return t.id=e.id,t.className="listener",t.setAttribute("onclick",`openModal('${e.id}')`),t.innerHTML=`
        <div class="game-category-card">
            <div class="overlay-div">
                <img class="gameByCategory-img" src="${e.image}" alt="${e.title}">
                <p class="overlay-txt">quick view</p>
            </div>
            <div class="game-category-details">
                <h3 class="game-category-title">${e.title}</h3>
                <p class="game-category-author">${e.author}</p>
            </div>
        </div>
    `,t}window.addEventListener("load",()=>{L.updateEffects()});window.addEventListener("resize",()=>{clearTimeout(window.resizeTimer),window.resizeTimer=setTimeout(()=>{L.updateEffects()},250)});console.log("main.js end");const E=document.getElementById("scrollTopButton");window.onscroll=function(){document.body.scrollTop>300||document.documentElement.scrollTop>300?E.classList.add("active"):E.classList.remove("active")};E.onclick=function(){window.scrollTo({top:0,behavior:"smooth"})};const _="hiddenCards";function j(){return JSON.parse(localStorage.getItem(_))||[]}const I=H(),w=z(I);function K(e){return`
    <li id="${e.id}" class="listener" onclick="openModal('${e.id}')">
        <div class="game-category-card">
            <div class="overlay-div">
                <img class="gameByCategory-img" src="${e.image}" alt="${e.title}">
                <p class="overlay-txt">quick view</p>
            </div>
            <div class="game-category-details">
                <h3 class="game-category-title">${e.title}</h3>
                <p class="game-category-author">${e.author}</p>
            </div>
        </div>
    </li>
    `}function N(e,t){const o=document.querySelector(`.game-category[data-category="${e}"]`);if(!o){console.warn(`Category element not found: ${e}`);return}const n=o.querySelector(".mask"),i=j(),c=JSON.parse(localStorage.getItem("activeUser")),s=c&&c.role==="admin",a=t.filter(l=>s||!i.includes(l.id)).map(l=>K(l)).join(""),r=o.querySelector(".games-category-list");r&&(r.innerHTML=a),n&&(n.style.display="none")}function Y(){Object.keys(w).forEach(e=>{const t=w[e];N(e,t)})}function Q(e){const t=document.createElement("div");t.className="game-category",t.setAttribute("data-category",e);const o=document.createElement("div");o.className="category-title";const n=document.createElement("div");n.className="mask",n.innerHTML='<div class="loader"></div>';const i=document.createElement("span");i.textContent=e.toUpperCase(),o.appendChild(i);const c=document.createElement("div");c.className="games";const s=document.createElement("ul");s.className="games-category-list",c.appendChild(s);const a=document.createElement("button");return a.id=e.replace(/\s+/g,"_"),a.classList.add("see-more"),a.textContent="SEE MORE",a.addEventListener("click",r=>{V(r,e)}),t.appendChild(o),t.appendChild(n),t.appendChild(c),t.appendChild(a),t}function V(e,t){e.target,document.querySelectorAll(".category-item").forEach(s=>{s.classList.remove("active-category"),s.textContent.trim()===t.trim()&&s.classList.add("active-category")}),document.querySelectorAll(".glow-effect").forEach(s=>s.remove());const i=w[t];N(t,i),new GlowEffectsManager().updateEffects()}function X(){const e=document.querySelector(".top-games-list");if(!e){console.error("Top games list container not found!");return}I.forEach(t=>{const o=Q(t);e.appendChild(o)})}document.addEventListener("DOMContentLoaded",()=>{try{X(),Y()}catch(e){console.error("Error loading games or categories:",e)}});document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelectorAll(".category-item"),t=document.querySelector(".topGamesTitle"),o=Array.from(e).find(s=>s.textContent.trim()==="All Categories"),n=document.querySelector(".top-games-list");function i(){t.textContent.trim()==="Most Popular Games"&&(e.forEach(s=>s.classList.remove("active-category")),o.classList.add("active-category"),n.classList.remove("category-active"))}function c(){t.innerHTML="Most Popular Games",n.classList.remove("category-active"),i()}o.addEventListener("click",c),e.forEach(s=>{s.addEventListener("click",()=>{const a=s.textContent.trim().toUpperCase();if(a==="ALL CATEGORIES")c();else if(t.innerHTML=`${a} Games`,e.forEach(r=>r.classList.remove("active-category")),s.classList.add("active-category"),document.querySelectorAll(".game-category").forEach(r=>{r.style.display=r.getAttribute("data-category").toUpperCase()===a?"block":"none"}),n.classList.add("category-active"),window.innerWidth<=768){const r=document.getElementsByTagName("aside")[0];r.style.display="none"}})}),document.querySelectorAll(".see-more").forEach(s=>{s.addEventListener("click",()=>{const a=s.id.replace("see-more-","").replace("_"," "),r=B(a);t.innerHTML=`${a} Games`,document.querySelectorAll(".game-category").forEach(l=>{l.style.display="none"}),n.innerHTML="",r.forEach(l=>{const M=Z(l);n.appendChild(M)}),n.classList.add("category-active")})}),i()});function Z(e){const t=document.createElement("li");return t.id=e.id,t.className="listener",t.setAttribute("onclick",`openModal('${e.id}')`),t.innerHTML=`
        <div class="game-category-card">
            <div class="overlay-div">
                <img class="gameByCategory-img" src="${e.image}" alt="${e.title}">
                <p class="overlay-txt">quick view</p>
            </div>
            <div class="game-category-details">
                <h3 class="game-category-title">${e.title}</h3>
                <p class="game-category-author">${e.author}</p>
            </div>
        </div>
    `,t}window.openModal=se;const d=document.querySelector(".modal"),q=d.querySelector(".modal-body"),ee=d.querySelector(".modal-close"),m=d.querySelector(".add-to-list"),te=d.querySelector(".under-btn-text"),u=d.querySelector(".hide-card"),O="hiddenCards";function oe(){return JSON.parse(localStorage.getItem(O))||[]}function A(e){localStorage.setItem(O,JSON.stringify(e))}function ne(e){const t=oe();if(t.includes(e)){const o=t.filter(n=>n!==e);return A(o),!1}return t.push(e),A(t),!0}async function se(e){try{const t=await J(e);d.setAttribute("data-game",JSON.stringify(t)),ae(t),d.classList.add("open"),document.body.style.overflow="hidden";const o=JSON.parse(localStorage.getItem("activeUser"));if(o){const n=ie(t);D(n),m.style.display="inline-block",o.role==="admin"?u.style.display="inline-block":u.style.display="none"}else m.style.display="none",u.style.display="none"}catch(t){console.error("Error loading game details:",t)}}function ae(e){const t=document.querySelector(".game-cover"),o=document.querySelector(".game-title"),n=document.querySelector(".game-author"),i=document.querySelector(".game-description"),c=document.querySelector(".marketplace-logo.steam"),s=document.querySelector(".marketplace-logo.trailer");t.src=e.image,t.alt=e.title,o.textContent=e.title,n.textContent=`by ${e.author}`,i.textContent=e.description||"No description available",c.href=e.links.steam||"#",s.href=e.links.trailer||"#"}function ie(e){const t=JSON.parse(localStorage.getItem("activeUser"));return(JSON.parse(localStorage.getItem(`cart_${t.id}`))||[]).includes(e.id)}function D(e){m.textContent=e?"Remove from shopping list":"Add to shopping list",te.textContent=e?"Removed from shopping list":"Added to shopping list",m.classList.add("show-text"),setTimeout(()=>{m.classList.remove("show-text")},4e3)}function ce(e){e.stopPropagation();const t=JSON.parse(localStorage.getItem("activeUser"));if(!t){alert("You must log in to add games to your shopping list."),window.location.href="auth.html";return}const o=JSON.parse(d.getAttribute("data-game")),n=`cart_${t.username}`,i=JSON.parse(localStorage.getItem(n))||[],c=i.includes(o.id);if(c){const s=i.filter(a=>a!==o.id);localStorage.setItem(n,JSON.stringify(s))}else i.push(o.id),localStorage.setItem(n,JSON.stringify(i));D(!c)}function re(){const e=JSON.parse(d.getAttribute("data-game")),t=JSON.parse(localStorage.getItem("activeUser"));if(t&&t.role==="admin"){const o=ne(e.id);alert(`The game "${e.title}" is now ${o?"hidden":"visible"} for users.`)}}m.addEventListener("click",ce);u.addEventListener("click",re);function C(){d.classList.remove("open"),document.body.style.overflow=""}ee.addEventListener("click",C);q.addEventListener("click",function(e){e.target===q&&C()});document.addEventListener("keydown",function(e){e.key==="Escape"&&C()});window.openAboutWindow=de;const p=document.querySelectorAll(".modal")[1],T=p.querySelector(".modal-body"),le=p.querySelector(".modal-close");function de(){p.classList.add("open"),document.body.style.overflow="hidden"}function k(){p.classList.remove("open"),document.body.style.overflow=""}le.addEventListener("click",k);T.addEventListener("click",function(e){e.target===T&&k()});document.addEventListener("keydown",function(e){e.key==="Escape"&&k()});window.openFeedbackWindow=ue;const f=document.querySelectorAll(".modal")[2],x=f.querySelector(".modal-body"),me=f.querySelector(".modal-close");function ue(){f.classList.add("open"),document.body.style.overflow="hidden"}function y(){f.classList.remove("open"),document.body.style.overflow=""}me.addEventListener("click",y);x.addEventListener("click",function(e){e.target===x&&y()});document.addEventListener("keydown",function(e){e.key==="Escape"&&y()});const ge=document.getElementById("feedback-form");ge.addEventListener("submit",function(e){e.preventDefault(),alert("Thank you for your feedback!"),y()});window.openReviewsWindow=fe;const h=document.querySelectorAll(".modal")[3],G=h.querySelector(".modal-body"),pe=h.querySelector(".modal-close");function fe(){h.classList.add("open"),document.body.style.overflow="hidden"}function b(){h.classList.remove("open"),document.body.style.overflow=""}pe.addEventListener("click",b);G.addEventListener("click",function(e){e.target===G&&b()});document.addEventListener("keydown",function(e){e.key==="Escape"&&b()});
//# sourceMappingURL=index.js.map
