import"./assets/styles-Czy6Rkti.js";import{a as B,b as I,c as J,g as U}from"./assets/updateLogin-BhIBXqoR.js";let R=class{constructor(t={}){this.options={glowSize:t.glowSize||200,minDistance:t.minDistance||300,effectsPerSection:t.effectsPerSection||3,sectionHeight:t.sectionHeight||1e3,containerSelector:t.containerSelector||"body"},this.container=document.querySelector(this.options.containerSelector),this.effects=[],this.createStyles(),this.init(),window.addEventListener("resize",this.handleResize.bind(this))}createStyles(){const t=document.createElement("style");t.textContent=`
      .glow-effect {
        position: absolute;
        width: ${this.options.glowSize}px;
        height: ${this.options.glowSize}px;
        background: radial-gradient(circle, rgba(255, 255, 255, 0.3), transparent);
        filter: blur(100px);
        opacity: 0.6;
        pointer-events: none;
        transition: transform 0.5s ease;
        animation: glowAnimation 7s infinite alternate;
      }

      @keyframes glowAnimation {
        0% {
          transform: translate(0, 0);
        }
        100% {
          transform: translate(50px, 50px);
        }
      }
    `,document.head.appendChild(t)}generateRandomPosition(t,o,n){let a=0;const c=50;for(;a<c;){const s=Math.random()*(t-this.options.glowSize),i=Math.random()*(o-this.options.glowSize);if(n.every(l=>Math.sqrt(Math.pow(s-l.x,2)+Math.pow(i-l.y,2))>=this.options.minDistance)||a===c-1)return{x:s,y:i};a++}}createGlowEffect(t,o){const n=document.createElement("div");return n.className="glow-effect",n.style.left=`${t}px`,n.style.top=`${o}px`,n}init(){this.updateEffects()}updateEffects(){this.effects.forEach(s=>s.remove()),this.effects=[];const t=Math.max(this.container.scrollHeight,this.container.clientHeight),o=this.container.clientWidth,a=Math.ceil(t/this.options.sectionHeight)*this.options.effectsPerSection,c=[];for(let s=0;s<a;s++){const i=this.generateRandomPosition(o,t,c);c.push(i);const r=this.createGlowEffect(i.x,i.y);this.container.appendChild(r),this.effects.push(r)}}handleResize(){clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(()=>{this.updateEffects()},150)}};console.log("main.js start");const C=new R({glowSize:200,minDistance:300,effectsPerSection:3,sectionHeight:1e3,containerSelector:"body"}),M=B(),E=document.querySelector(".categories-list"),P=document.querySelector(".topGamesTitle"),S=document.querySelector(".top-games-list"),g=document.createElement("li");g.classList.add("category-item");g.textContent="All Categories";E.appendChild(g);g.addEventListener("click",F);if(M.length>0)M.forEach(e=>{const t=document.createElement("li");t.classList.add("category-item"),t.textContent=e,E.appendChild(t),t.addEventListener("click",()=>{W(e)})});else{const e=document.createElement("li");e.textContent="No categories available",E.appendChild(e)}function W(e){const t=I(e);P.innerHTML=`${e} Games`,document.querySelectorAll(".game-category").forEach(o=>{o.style.display="none"}),S.innerHTML="",t.forEach(o=>{const n=_(o);S.appendChild(n)}),S.classList.add("category-active"),setTimeout(()=>{C.updateEffects()},100)}function F(){location.reload()}function _(e){const t=document.createElement("li");return t.id=e.id,t.className="listener",t.setAttribute("onclick",`openModal('${e.id}')`),t.innerHTML=`
        <div class="game-category-card">
            <div class="overlay-div">
                <img class="gameByCategory-img" src="${e.image}" alt="${e.title}">
                <p class="overlay-txt">quick view</p>
            </div>
            <div class="game-category-details">
                <h3 class="game-category-title">${e.title}</h3>
                <p class="game-category-author">${e.author}</p>
            </div>
        </div>
    `,t}window.addEventListener("load",()=>{C.updateEffects()});window.addEventListener("resize",()=>{clearTimeout(window.resizeTimer),window.resizeTimer=setTimeout(()=>{C.updateEffects()},250)});console.log("main.js end");const w=document.getElementById("scrollTopButton");window.onscroll=function(){document.body.scrollTop>300||document.documentElement.scrollTop>300?w.classList.add("active"):w.classList.remove("active")};w.onclick=function(){window.scrollTo({top:0,behavior:"smooth"})};const j="hiddenCards";function K(){return JSON.parse(localStorage.getItem(j))||[]}const N=B(),L=J(N);function Y(e){return`
    <li id="${e.id}" class="listener" onclick="openModal('${e.id}')">
        <div class="game-category-card">
            <div class="overlay-div">
                <img class="gameByCategory-img" src="${e.image}" alt="${e.title}">
                <p class="overlay-txt">quick view</p>
            </div>
            <div class="game-category-details">
                <h3 class="game-category-title">${e.title}</h3>
                <p class="game-category-author">${e.author}</p>
            </div>
        </div>
    </li>
    `}function O(e,t){const o=document.querySelector(`.game-category[data-category="${e}"]`);if(!o){console.warn(`Category element not found: ${e}`);return}const n=o.querySelector(".mask"),a=K(),c=JSON.parse(localStorage.getItem("activeUser")),s=c&&c.role==="admin",i=t.filter(l=>s||!a.includes(l.id)).map(l=>Y(l)).join(""),r=o.querySelector(".games-category-list");r&&(r.innerHTML=i),n&&(n.style.display="none")}function Q(){Object.keys(L).forEach(e=>{const t=L[e];O(e,t)})}function V(e){const t=document.createElement("div");t.className="game-category",t.setAttribute("data-category",e);const o=document.createElement("div");o.className="category-title";const n=document.createElement("div");n.className="mask",n.innerHTML='<div class="loader"></div>';const a=document.createElement("span");a.textContent=e.toUpperCase(),o.appendChild(a);const c=document.createElement("div");c.className="games";const s=document.createElement("ul");s.className="games-category-list",c.appendChild(s);const i=document.createElement("button");return i.id=e.replace(/\s+/g,"_"),i.classList.add("see-more"),i.textContent="SEE MORE",i.addEventListener("click",r=>{X(r,e)}),t.appendChild(o),t.appendChild(n),t.appendChild(c),t.appendChild(i),t}function X(e,t){e.target,document.querySelectorAll(".category-item").forEach(s=>{s.classList.remove("active-category"),s.textContent.trim()===t.trim()&&s.classList.add("active-category")}),document.querySelectorAll(".glow-effect").forEach(s=>s.remove());const a=L[t];O(t,a),new GlowEffectsManager().updateEffects()}function Z(){const e=document.querySelector(".top-games-list");if(!e){console.error("Top games list container not found!");return}N.forEach(t=>{const o=V(t);e.appendChild(o)})}document.addEventListener("DOMContentLoaded",()=>{try{Z(),Q()}catch(e){console.error("Error loading games or categories:",e)}});document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelectorAll(".category-item"),t=document.querySelector(".topGamesTitle"),o=Array.from(e).find(s=>s.textContent.trim()==="All Categories"),n=document.querySelector(".top-games-list");function a(){t.textContent.trim()==="Most Popular Games"&&(e.forEach(s=>s.classList.remove("active-category")),o.classList.add("active-category"),n.classList.remove("category-active"))}function c(){t.innerHTML="Most Popular Games",n.classList.remove("category-active"),a()}o.addEventListener("click",c),e.forEach(s=>{s.addEventListener("click",()=>{const i=s.textContent.trim().toUpperCase();if(i==="ALL CATEGORIES")c();else if(t.innerHTML=`${i} Games`,e.forEach(r=>r.classList.remove("active-category")),s.classList.add("active-category"),document.querySelectorAll(".game-category").forEach(r=>{r.style.display=r.getAttribute("data-category").toUpperCase()===i?"block":"none"}),n.classList.add("category-active"),window.innerWidth<=768){const r=document.getElementsByTagName("aside")[0];r.style.display="none"}})}),document.querySelectorAll(".see-more").forEach(s=>{s.addEventListener("click",()=>{const i=s.id.replace("see-more-","").replace("_"," "),r=I(i);t.innerHTML=`${i} Games`,document.querySelectorAll(".game-category").forEach(l=>{l.style.display="none"}),n.innerHTML="",r.forEach(l=>{const $=ee(l);n.appendChild($)}),n.classList.add("category-active")})}),a()});function ee(e){const t=document.createElement("li");return t.id=e.id,t.className="listener",t.setAttribute("onclick",`openModal('${e.id}')`),t.innerHTML=`
        <div class="game-category-card">
            <div class="overlay-div">
                <img class="gameByCategory-img" src="${e.image}" alt="${e.title}">
                <p class="overlay-txt">quick view</p>
            </div>
            <div class="game-category-details">
                <h3 class="game-category-title">${e.title}</h3>
                <p class="game-category-author">${e.author}</p>
            </div>
        </div>
    `,t}window.openModal=se;const d=document.querySelector(".modal"),q=d.querySelector(".modal-body"),te=d.querySelector(".modal-close"),u=d.querySelector(".add-to-list"),oe=d.querySelector(".under-btn-text"),m=d.querySelector(".hide-card"),D="hiddenCards";function ne(){return JSON.parse(localStorage.getItem(D))||[]}function T(e){localStorage.setItem(D,JSON.stringify(e))}function A(e){const t=ne();if(t.includes(e)){const o=t.filter(n=>n!==e);return T(o),!1}return t.push(e),T(t),!0}async function se(e){try{const t=await U(e);d.setAttribute("data-game",JSON.stringify(t)),ie(t),d.classList.add("open"),document.body.style.overflow="hidden";const o=JSON.parse(localStorage.getItem("activeUser"));if(o){const n=ae(t);z(n),u.style.display="inline-block",o.role==="admin"?(m.textContent="Toggle Hidden Status",m.style.display="inline-block"):(m.textContent="Hide this card",m.style.display="inline-block")}else u.style.display="none",m.textContent="Hide this card",m.style.display="inline-block"}catch(t){console.error("Error loading game details:",t)}}function ie(e){const t=document.querySelector(".game-cover"),o=document.querySelector(".game-title"),n=document.querySelector(".game-author"),a=document.querySelector(".game-description"),c=document.querySelector(".marketplace-logo.steam"),s=document.querySelector(".marketplace-logo.trailer");t.src=e.image,t.alt=e.title,o.textContent=e.title,n.textContent=`by ${e.author}`,a.textContent=e.description||"No description available",c.href=e.links.steam||"#",s.href=e.links.trailer||"#"}function ae(e){const t=JSON.parse(localStorage.getItem("activeUser"));return(JSON.parse(localStorage.getItem(`cart_${t.id}`))||[]).includes(e.id)}function z(e){u.textContent=e?"Remove from shopping list":"Add to shopping list",oe.textContent=e?"Removed from shopping list":"Added to shopping list",u.classList.add("show-text"),setTimeout(()=>{u.classList.remove("show-text")},4e3)}function ce(e){e.stopPropagation();const t=JSON.parse(localStorage.getItem("activeUser"));if(!t){alert("You must log in to add games to your shopping list."),window.location.href="auth.html";return}const o=JSON.parse(d.getAttribute("data-game")),n=`cart_${t.username}`,a=JSON.parse(localStorage.getItem(n))||[],c=a.includes(o.id);if(c){const s=a.filter(i=>i!==o.id);localStorage.setItem(n,JSON.stringify(s))}else a.push(o.id),localStorage.setItem(n,JSON.stringify(a));z(!c)}function re(){const e=JSON.parse(d.getAttribute("data-game")),t=JSON.parse(localStorage.getItem("activeUser"));if(t&&t.role==="admin"){const o=A(e.id);alert(`The game "${e.title}" is now ${o?"hidden":"visible"} for users.`)}else{A(e.id);const o=document.getElementById(e.id);o&&(o.style.display="none",alert(`The game "${e.title}" has been hidden.`))}p()}u.addEventListener("click",ce);m.addEventListener("click",re);function p(){d.classList.remove("open"),document.body.style.overflow=""}te.addEventListener("click",p);q.addEventListener("click",function(e){e.target===q&&p()});document.addEventListener("keydown",function(e){e.key==="Escape"&&p()});window.openAboutWindow=de;const f=document.querySelectorAll(".modal")[1],x=f.querySelector(".modal-body"),le=f.querySelector(".modal-close");function de(){f.classList.add("open"),document.body.style.overflow="hidden"}function k(){f.classList.remove("open"),document.body.style.overflow=""}le.addEventListener("click",k);x.addEventListener("click",function(e){e.target===x&&k()});document.addEventListener("keydown",function(e){e.key==="Escape"&&k()});window.openFeedbackWindow=ue;const y=document.querySelectorAll(".modal")[2],H=y.querySelector(".modal-body"),me=y.querySelector(".modal-close");function ue(){y.classList.add("open"),document.body.style.overflow="hidden"}function h(){y.classList.remove("open"),document.body.style.overflow=""}me.addEventListener("click",h);H.addEventListener("click",function(e){e.target===H&&h()});document.addEventListener("keydown",function(e){e.key==="Escape"&&h()});const ge=document.getElementById("feedback-form");ge.addEventListener("submit",function(e){e.preventDefault(),alert("Thank you for your feedback!"),h()});window.openReviewsWindow=fe;const v=document.querySelectorAll(".modal")[3],G=v.querySelector(".modal-body"),pe=v.querySelector(".modal-close");function fe(){v.classList.add("open"),document.body.style.overflow="hidden"}function b(){v.classList.remove("open"),document.body.style.overflow=""}pe.addEventListener("click",b);G.addEventListener("click",function(e){e.target===G&&b()});document.addEventListener("keydown",function(e){e.key==="Escape"&&b()});
//# sourceMappingURL=index.js.map
