import"./assets/styles-DmVcBJp-.js";import{a as G,b as I,c as H,g as D}from"./assets/infoFromDB-DU5EXDDh.js";let z=class{constructor(t={}){this.options={glowSize:t.glowSize||200,minDistance:t.minDistance||300,effectsPerSection:t.effectsPerSection||3,sectionHeight:t.sectionHeight||1e3,containerSelector:t.containerSelector||"body"},this.container=document.querySelector(this.options.containerSelector),this.effects=[],this.createStyles(),this.init(),window.addEventListener("resize",this.handleResize.bind(this))}createStyles(){const t=document.createElement("style");t.textContent=`
      .glow-effect {
        position: absolute;
        width: ${this.options.glowSize}px;
        height: ${this.options.glowSize}px;
        background: radial-gradient(circle, rgba(255, 255, 255, 0.3), transparent);
        filter: blur(100px);
        opacity: 0.6;
        pointer-events: none;
        transition: transform 0.5s ease;
        animation: glowAnimation 7s infinite alternate;
      }

      @keyframes glowAnimation {
        0% {
          transform: translate(0, 0);
        }
        100% {
          transform: translate(50px, 50px);
        }
      }
    `,document.head.appendChild(t)}generateRandomPosition(t,o,n){let a=0;const i=50;for(;a<i;){const s=Math.random()*(t-this.options.glowSize),c=Math.random()*(o-this.options.glowSize);if(n.every(d=>Math.sqrt(Math.pow(s-d.x,2)+Math.pow(c-d.y,2))>=this.options.minDistance)||a===i-1)return{x:s,y:c};a++}}createGlowEffect(t,o){const n=document.createElement("div");return n.className="glow-effect",n.style.left=`${t}px`,n.style.top=`${o}px`,n}init(){this.updateEffects()}updateEffects(){this.effects.forEach(s=>s.remove()),this.effects=[];const t=Math.max(this.container.scrollHeight,this.container.clientHeight),o=this.container.clientWidth,a=Math.ceil(t/this.options.sectionHeight)*this.options.effectsPerSection,i=[];for(let s=0;s<a;s++){const c=this.generateRandomPosition(o,t,i);i.push(c);const r=this.createGlowEffect(c.x,c.y);this.container.appendChild(r),this.effects.push(r)}}handleResize(){clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(()=>{this.updateEffects()},150)}};console.log("main.js start");const S=new z({glowSize:200,minDistance:300,effectsPerSection:3,sectionHeight:1e3,containerSelector:"body"}),M=G(),v=document.querySelector(".categories-list"),U=document.querySelector(".topGamesTitle"),h=document.querySelector(".top-games-list"),u=document.createElement("li");u.classList.add("category-item");u.textContent="All Categories";v.appendChild(u);u.addEventListener("click",R);if(M.length>0)M.forEach(e=>{const t=document.createElement("li");t.classList.add("category-item"),t.textContent=e,v.appendChild(t),t.addEventListener("click",()=>{P(e)})});else{const e=document.createElement("li");e.textContent="No categories available",v.appendChild(e)}function P(e){const t=I(e);U.innerHTML=`${e} Games`,document.querySelectorAll(".game-category").forEach(o=>{o.style.display="none"}),h.innerHTML="",t.forEach(o=>{const n=J(o);h.appendChild(n)}),h.classList.add("category-active"),setTimeout(()=>{S.updateEffects()},100)}function R(){location.reload()}function J(e){const t=document.createElement("li");return t.id=e.id,t.className="listener",t.setAttribute("onclick",`openModal('${e.id}')`),t.innerHTML=`
        <div class="game-category-card">
            <div class="overlay-div">
                <img class="gameByCategory-img" src="${e.image}" alt="${e.title}">
                <p class="overlay-txt">quick view</p>
            </div>
            <div class="game-category-details">
                <h3 class="game-category-title">${e.title}</h3>
                <p class="game-category-author">${e.author}</p>
            </div>
        </div>
    `,t}window.addEventListener("load",()=>{S.updateEffects()});window.addEventListener("resize",()=>{clearTimeout(window.resizeTimer),window.resizeTimer=setTimeout(()=>{S.updateEffects()},250)});console.log("main.js end");const E=document.getElementById("scrollTopButton");window.onscroll=function(){document.body.scrollTop>300||document.documentElement.scrollTop>300?E.classList.add("active"):E.classList.remove("active")};E.onclick=function(){window.scrollTo({top:0,behavior:"smooth"})};const B=G(),L=H(B);function W(e){return`
    <li id="${e.id}" class="listener" onclick="openModal('${e.id}')">
        <div class="game-category-card">
            <div class="overlay-div">
                <img class="gameByCategory-img" src="${e.image}" alt="${e.title}">
                <p class="overlay-txt">quick view</p>
            </div>
            <div class="game-category-details">
                <h3 class="game-category-title">${e.title}</h3>
                <p class="game-category-author">${e.author}</p>
            </div>
        </div>
    </li>
    `}function O(e,t){const o=document.querySelector(`.game-category[data-category="${e}"]`);if(o){const n=o.querySelector(".mask"),a=t.map(s=>W(s)).join(""),i=o.querySelector(".games-category-list");i.innerHTML=a,n.style.display="none"}}function F(){Object.keys(L).forEach(e=>{const t=L[e];O(e,t)})}function _(e){const t=document.createElement("div");t.className="game-category",t.setAttribute("data-category",e);const o=document.createElement("div");o.className="category-title";const n=document.createElement("div");n.className="mask",n.innerHTML='<div class="loader"></div>';const a=document.createElement("span");a.textContent=e.toUpperCase(),o.appendChild(a);const i=document.createElement("div");i.className="games";const s=document.createElement("ul");s.className="games-category-list",i.appendChild(s);const c=document.createElement("button");return c.id=e.replace(/\s+/g,"_"),c.classList.add("see-more"),c.textContent="SEE MORE",c.addEventListener("click",j),t.appendChild(o),t.appendChild(n),t.appendChild(i),t.appendChild(c),t}function j(e){const o=e.target.id.replace(/_/g," ");document.querySelectorAll(".category-item").forEach(c=>{c.classList.remove("active-category"),c.textContent.trim()===o.trim()&&c.classList.add("active-category")}),document.querySelectorAll(".glow-effect").forEach(c=>c.remove());const i=L[o];O(o,i),new GlowEffectsManager().updateEffects()}function K(){const e=document.querySelector(".top-games-list");B.forEach(t=>{const o=_(t);e.appendChild(o)})}document.addEventListener("DOMContentLoaded",()=>{K(),F()});document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelectorAll(".category-item"),t=document.querySelector(".topGamesTitle"),o=Array.from(e).find(s=>s.textContent.trim()==="All Categories"),n=document.querySelector(".top-games-list");function a(){t.textContent.trim()==="Most Popular Games"&&(e.forEach(s=>s.classList.remove("active-category")),o.classList.add("active-category"),n.classList.remove("category-active"))}function i(){t.innerHTML="Most Popular Games",n.classList.remove("category-active"),a()}o.addEventListener("click",i),e.forEach(s=>{s.addEventListener("click",()=>{const c=s.textContent.trim().toUpperCase();if(c==="ALL CATEGORIES")i();else if(t.innerHTML=`${c} Games`,e.forEach(r=>r.classList.remove("active-category")),s.classList.add("active-category"),document.querySelectorAll(".game-category").forEach(r=>{r.style.display=r.getAttribute("data-category").toUpperCase()===c?"block":"none"}),n.classList.add("category-active"),window.innerWidth<=768){const r=document.getElementsByTagName("aside")[0];r.style.display="none"}})}),document.querySelectorAll(".see-more").forEach(s=>{s.addEventListener("click",()=>{const c=s.id.replace("see-more-","").replace("_"," "),r=I(c);t.innerHTML=`${c} Games`,document.querySelectorAll(".game-category").forEach(d=>{d.style.display="none"}),n.innerHTML="",r.forEach(d=>{const b=Q(d);n.appendChild(b)}),n.classList.add("category-active")})}),a()});function Q(e){const t=document.createElement("li");return t.id=e.id,t.className="listener",t.setAttribute("onclick",`openModal('${e.id}')`),t.innerHTML=`
        <div class="game-category-card">
            <div class="overlay-div">
                <img class="gameByCategory-img" src="${e.image}" alt="${e.title}">
                <p class="overlay-txt">quick view</p>
            </div>
            <div class="game-category-details">
                <h3 class="game-category-title">${e.title}</h3>
                <p class="game-category-author">${e.author}</p>
            </div>
        </div>
    `,t}window.openModal=Y;const l=document.querySelector(".modal"),q=l.querySelector(".modal-body"),V=l.querySelector(".modal-close"),m=l.querySelector(".add-to-list"),X=l.querySelector(".under-btn-text");async function Y(e){try{const t=await D(e);if(l.setAttribute("data-game",JSON.stringify(t)),Z(t),l.classList.add("open"),document.body.style.overflow="hidden",JSON.parse(localStorage.getItem("activeUser"))){const n=ee(t);N(n),m.style.display="inline-block"}else m.style.display="none"}catch(t){console.log("Error loading game details",t)}}function Z(e){const t=document.querySelector(".game-cover"),o=document.querySelector(".game-title"),n=document.querySelector(".game-author"),a=document.querySelector(".game-description"),i=document.querySelector(".marketplace-logo.steam"),s=document.querySelector(".marketplace-logo.trailer");t.src=e.image,t.alt=e.title,o.textContent=e.title,n.textContent=`by ${e.author}`,a.textContent=e.description||"No description available",i.href=e.links.steam||"#",s.href=e.links.trailer||"#"}function ee(e){const t=JSON.parse(localStorage.getItem("activeUser"));return(JSON.parse(localStorage.getItem(`cart_${t.id}`))||[]).includes(e.id)}function N(e){m.textContent=e?"Remove from shopping list":"Add to shopping list",X.textContent=e?"Removed from shopping list":"Added to shopping list",m.classList.add("show-text"),setTimeout(()=>{m.classList.remove("show-text")},4e3)}function te(e){e.stopPropagation();const t=JSON.parse(localStorage.getItem("activeUser"));if(!t){alert("Ви повинні увійти до системи, щоб додавати ігри до корзини."),window.location.href="auth.html";return}const o=JSON.parse(l.getAttribute("data-game")),n=`cart_${t.username}`,a=JSON.parse(localStorage.getItem(n))||[],i=a.includes(o.id);if(i){const s=a.filter(c=>c!==o.id);localStorage.setItem(n,JSON.stringify(s))}else a.push(o.id),localStorage.setItem(n,JSON.stringify(a));N(!i)}m.addEventListener("click",te);function w(){l.classList.remove("open"),document.body.style.overflow=""}V.addEventListener("click",w);q.addEventListener("click",function(e){e.target===q&&w()});document.addEventListener("keydown",function(e){e.key==="Escape"&&w()});window.openAboutWindow=ne;const g=document.querySelectorAll(".modal")[1],$=g.querySelector(".modal-body"),oe=g.querySelector(".modal-close");function ne(){g.classList.add("open"),document.body.style.overflow="hidden"}function k(){g.classList.remove("open"),document.body.style.overflow=""}oe.addEventListener("click",k);$.addEventListener("click",function(e){e.target===$&&k()});document.addEventListener("keydown",function(e){e.key==="Escape"&&k()});window.openFeedbackWindow=ce;const p=document.querySelectorAll(".modal")[2],T=p.querySelector(".modal-body"),se=p.querySelector(".modal-close");function ce(){p.classList.add("open"),document.body.style.overflow="hidden"}function y(){p.classList.remove("open"),document.body.style.overflow=""}se.addEventListener("click",y);T.addEventListener("click",function(e){e.target===T&&y()});document.addEventListener("keydown",function(e){e.key==="Escape"&&y()});const ae=document.getElementById("feedback-form");ae.addEventListener("submit",function(e){e.preventDefault(),alert("Thank you for your feedback!"),y()});window.openReviewsWindow=re;const f=document.querySelectorAll(".modal")[3],x=f.querySelector(".modal-body"),ie=f.querySelector(".modal-close");function re(){f.classList.add("open"),document.body.style.overflow="hidden"}function C(){f.classList.remove("open"),document.body.style.overflow=""}ie.addEventListener("click",C);x.addEventListener("click",function(e){e.target===x&&C()});document.addEventListener("keydown",function(e){e.key==="Escape"&&C()});function le(){const e=document.getElementById("authLink"),t=document.getElementById("authImage"),o=!!localStorage.getItem("activeUser");console.log("update login"),o?(e.textContent="LOGOUT",e.href="#",t.querySelector("img").src="./img/logout.svg",e.addEventListener("click",A)):(e.textContent="LOGIN",e.href="auth.html",t.querySelector("img").src="./img/login.svg",e.removeEventListener("click",A))}function A(e){e.preventDefault(),localStorage.removeItem("activeUser"),alert("Ви успішно вийшли з системи."),window.location.reload()}document.addEventListener("DOMContentLoaded",le);
//# sourceMappingURL=index.js.map
